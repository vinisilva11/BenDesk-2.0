<!-- Modal Editar Ativo -->
<div class="modal fade" id="editAtivo{{ ativo.id }}" tabindex="-1" aria-labelledby="editAtivoLabel{{ ativo.id }}" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content bg-dark text-light border-0 rounded-4 shadow-lg">
      <div class="modal-header border-secondary">
        <h5 class="modal-title fw-bold" id="editAtivoLabel{{ ativo.id }}">✏️ Editar Ativo</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <form class="editAtivoForm" action="{{ url_for('editar_ativo', id=ativo.id) }}" method="POST">
        <div class="modal-body">
          <div class="row g-3">
            
            <!-- Tipo de Ativo -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Tipo de Ativo</label>
              <select name="type_id" class="form-select bg-black text-light border-secondary">
                <option value="">Selecione...</option>
                {% for tipo in tipos %}
                  <option value="{{ tipo.id }}" {% if ativo.type_id == tipo.id %}selected{% endif %}>
                    {{ tipo.name }}
                  </option>
                {% endfor %}
              </select>
            </div>

            <!-- Marca -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Marca</label>
              <input type="text" name="brand" class="form-control bg-black text-light border-secondary" value="{{ ativo.brand }}">
            </div>

            <!-- Modelo -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Modelo</label>
              <input type="text" name="model" class="form-control bg-black text-light border-secondary" value="{{ ativo.model }}">
            </div>

            <!-- Nº de Série -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Nº de Série</label>
              <input type="text" name="serial_number" class="form-control bg-black text-light border-secondary" value="{{ ativo.serial_number }}">
            </div>

            <!-- Hostname -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Hostname</label>
              <input type="text" name="hostname" class="form-control bg-black text-light border-secondary" value="{{ ativo.hostname }}">
            </div>

            <!-- Nota Fiscal -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Nota Fiscal</label>
              <input type="text" name="invoice_number" class="form-control bg-black text-light border-secondary" value="{{ ativo.invoice_number }}">
            </div>

            <!-- Código Patrimônio -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Código Patrimônio</label>
              <input type="text" name="patrimony_code" class="form-control bg-black text-light border-secondary" value="{{ ativo.patrimony_code }}">
            </div>

            <!-- Status -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Status</label>
              <select name="status" class="form-select bg-black text-light border-secondary">
                <option value="Disponível" {% if ativo.status == 'Disponível' %}selected{% endif %}>Disponível</option>
                <option value="Alugado" {% if ativo.status == 'Alugado' %}selected{% endif %}>Alugado</option>
                <option value="Em Manutenção" {% if ativo.status == 'Em Manutenção' %}selected{% endif %}>Em Manutenção</option>
              </select>
            </div>

            <!-- Tipo de Propriedade -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Propriedade</label>
              <select name="ownership" class="form-select bg-black text-light border-secondary">
                <option value="Próprio" {% if ativo.ownership == 'Próprio' %}selected{% endif %}>Próprio</option>
                <option value="Terceiro" {% if ativo.ownership == 'Terceiro' %}selected{% endif %}>Terceiro</option>
                <option value="Alugado" {% if ativo.ownership == 'Alugado' %}selected{% endif %}>Alugado</option>
              </select>
            </div>

            <!-- Localização -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Localização</label>
              <input type="text" name="location" class="form-control bg-black text-light border-secondary" value="{{ ativo.location }}">
            </div>

            <!-- Centro de Custo -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Centro de Custo</label>
              <select name="cost_center_id" class="form-select bg-black text-light border-secondary">
                <option value="">Selecione...</option>
                {% for id, nome in centros.items() %}
                  <option value="{{ id }}" {% if ativo.cost_center_id == id %}selected{% endif %}>
                    {{ nome }}
                  </option>
                {% endfor %}
              </select>
            </div>

            <!-- Usuário Vinculado -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Usuário Vinculado</label>
              <select name="device_user_id" class="form-select bg-black text-light border-secondary">
                <option value="">Selecione...</option>
                {% for id, nome in usuarios.items() %}
                  <option value="{{ id }}" {% if ativo.device_user_id == id %}selected{% endif %}>
                    {{ nome }}
                  </option>
                {% endfor %}
              </select>
            </div>

            <!-- Datas -->
            <div class="col-md-6">
              <label class="form-label text-secondary small">Data de Aquisição</label>
              <input type="date" name="acquisition_date" class="form-control bg-black text-light border-secondary"
                     value="{{ ativo.acquisition_date.strftime('%Y-%m-%d') if ativo.acquisition_date else '' }}">
            </div>

            <div class="col-md-6">
              <label class="form-label text-secondary small">Data de Devolução</label>
              <input type="date" name="return_date" class="form-control bg-black text-light border-secondary"
                     value="{{ ativo.return_date.strftime('%Y-%m-%d') if ativo.return_date else '' }}">
            </div>

            <!-- Observações -->
            <div class="col-12">
              <label class="form-label text-secondary small">Observações</label>
              <textarea name="notes" class="form-control bg-black text-light border-secondary" rows="3">{{ ativo.notes }}</textarea>
            </div>

          </div>
        </div>

        <div class="modal-footer border-secondary">
          <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-primary">Salvar Alterações</button>
        </div>
      </form>
    </div>
  </div>
</div>
